<form class="dialog-full-parent" [formGroup]="editForm">
    <div mat-dialog-title class="dialog-header">
        <mat-toolbar>
            <span>
                {{
                !data.news ? 'Thêm mới khuyến mãi'
                : data.action === 'edit' ? 'Chỉnh sửa khuyến mãi' : 'Chi tiết khuyến mãi'
                }}
            </span>
            <span class="fx-spacer"></span>
            <button mat-icon-button class="dialog-close" (click)="close()">
                <mat-icon mat-list-icon>close</mat-icon>
            </button>
        </mat-toolbar>
    </div>

    <mat-dialog-content class="dialog-content">

        <div class="row mb-4">
            <label class="col-md-4 col-lg-3 col-form-label fw-bold fs-6">
                <span class="required">Tên chương trình</span>
            </label>
            <div class="col-md-8 col-lg-9 fv-row">
                <input type="text" formControlName="name" class="form-control cb-input form-control-sm " />
                <validation-message [controlName]="'Tên chương trình'"
                    [control]="editForm.get('name')"></validation-message>
            </div>
        </div>

        <div class="row mb-4">
            <label class="col-md-4 col-lg-3 col-form-label fw-bold fs-6">
                <span>Thời gian bắt đầu</span>
            </label>
            <div class="col-md-8 col-lg-9 fv-row">
                <div class="owl-date-wrap full-width">
                    <input [owlDateTime]="dtStartDate" placeholder="DD/MM/YYYY" [owlDateTimeTrigger]="dtStartDate"
                        class="form-control cb-input form-control-sm " formControlName="startDate" readonly>
                    <mat-icon matPrefix svgIcon="cb_date" color="picker-icon"></mat-icon>
                    <owl-date-time #dtStartDate [pickerType]="'calendar'"></owl-date-time>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <label class="col-md-4 col-lg-3 col-form-label fw-bold fs-6">
                <span>Thời gian loại trừ</span>
            </label>
            <div class="col-md-8 col-lg-9 fv-row">
                <div class="owl-date-wrap full-width">
                    <input [owlDateTime]="dtExceptedDate" placeholder="DD/MM/YYYY" [owlDateTimeTrigger]="dtExceptedDate"
                        class="form-control cb-input form-control-sm " formControlName="exceptedDate" readonly>
                    <mat-icon matPrefix svgIcon="cb_date" color="picker-icon"></mat-icon>
                    <owl-date-time #dtExceptedDate [pickerType]="'calendar'"></owl-date-time>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <label class="col-md-4 col-lg-3 col-form-label fw-bold fs-6">
                <span>Thời gian loại trừ</span>
            </label>
            <div class="col-md-8 col-lg-9 fv-row">
                <div class="multiple-dates-wrap full-width">
                    <mat-form-field>
                        <ngx-multiple-dates [matDatepicker]="picker" formControlName="exceptedDate" >
                        </ngx-multiple-dates>
                        <mat-datepicker-toggle matPrefix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                      </mat-form-field>     
                </div>
            </div>
        </div>


        <div class="row mb-4">
            <label class="col-md-4 col-lg-3 col-form-label fw-bold fs-6">
                <span>Thời gian kết thúc</span>
            </label>
            <div class="col-md-8 col-lg-9 fv-row">
                <div class="owl-date-wrap full-width">
                    <input [owlDateTime]="dtEndDate" placeholder="DD/MM/YYYY" [owlDateTimeTrigger]="dtEndDate"
                        class="form-control cb-input form-control-sm " formControlName="endDate" readonly>
                    <mat-icon matPrefix svgIcon="cb_date" color="picker-icon"></mat-icon>
                    <owl-date-time #dtEndDate [pickerType]="'calendar'"></owl-date-time>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <label class="col-md-4 col-lg-3 col-form-label fw-bold fs-6">
                <span class="required">Loại phòng áp dụng</span>
            </label>
            <div class="col-md-8 col-lg-9 fv-row">
                <ng-select [items]="roomTypes" class="form-select-control form-selection-sm" [bindLabel]="'name'"
                    [bindValue]="'id'" formControlName="roomType" [searchable]="true">
                </ng-select>
                <validation-message [controlName]="'Loại phòng áp dụng'"
                    [control]="editForm.get('roomcount')"></validation-message>
            </div>
        </div>

        <div class="row mb-4">
            <label class="col-md-4 col-lg-3 col-form-label fw-bold fs-6">
                <span class="required">Hình thức KM</span>
            </label>
            <div class="col-md-8 col-lg-9 fv-row">
                <ng-select [items]="promotionTypes" class="form-select-control form-selection-sm" [bindLabel]="'name'"
                    [bindValue]="'id'" formControlName="promotionType" [searchable]="true">
                </ng-select>
                <validation-message [controlName]="'Hình thức KM'"
                    [control]="editForm.get('roomcount')"></validation-message>
            </div>
        </div>


        <div class="row mb-4">
            <label class="col-md-4 col-lg-3 col-form-label fw-bold fs-6">
                <span>Dịch vụ đi kèm</span>
            </label>
            <div class="col-md-8 col-lg-9 fv-row">
                <ng-select [items]="services" class="form-select-control form-selection-sm" [bindLabel]="'name'"
                    [bindValue]="'id'" formControlName="service" [searchable]="true">
                </ng-select>
                <validation-message [controlName]="'Dịch vụ đi kèm'"
                    [control]="editForm.get('roomcount')"></validation-message>
            </div>
        </div>

        <div class="row mb-6">
            <label class="col-md-4 col-lg-3 col-form-label fw-bold fs-6">
                <span class="required">Trạng thái</span>
            </label>
            <div class="col-md-8 col-lg-9 fv-row" style="padding-top: calc(0.5rem + 1px);">
                <div class="form-check form-switch form-check-custom form-check-solid">
                    <input formControlName="status" class="form-check-input" type="checkbox">
                    &nbsp;&nbsp;
                    <div *ngIf="editForm.controls['status'].value == true" class="status success-color"> Đang diễn ra </div>
                    <div *ngIf="editForm.controls['status'].value == false" class="status secondary-color"> Hủy </div>
                </div>
            </div>
        </div>
    </mat-dialog-content>



    <mat-dialog-actions class="dialog-footer" *ngIf="['add','edit'].includes(data.action)">
        <button type="button" class="btn btn-secondary btn-sm" (click)="close()">Quay lại</button>
        <div class="cb-spacer"></div>
        <button type="button" class="btn btn-primary btn-sm" (click)="save()">
            Lưu lại
        </button>
    </mat-dialog-actions>
</form>